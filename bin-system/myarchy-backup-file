#!/usr/bin/env bash

file="$1"

if test -L "$file"; then
	exit 0
fi

if ! test -e "$file"; then
	exit 0
fi

timestamp=$(date +%Y%m%d_%H%M%S)

backup_path="/var/backups/$file.${timestamp}"

mkdir -p "$(dirname "$backup_path")"
cp -r "$file" "$backup_path" && echo "backup created ${backup_path}"
