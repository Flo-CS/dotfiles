#!/usr/bin/env bash

set -euo pipefail

configure_shell() {
	dots-file-robust-link config/.bashrc ~/.bashrc
	dots-file-robust-link config/.bash_profile ~/.bash_profile
}

configure_uwsm() {
	dots-file-robust-link config/uwsm/env ~/.config/uwsm/env
	dots-file-robust-link config/uwsm/env-hyprland ~/.config/uwsm/env-hyprland
}

configure_git() {
	dots-file-robust-link config/.gitconfig ~/.gitconfig
}

configure_bat() {
	local bat_dir="$(bat --config-dir)"
	dots-file-robust-link config/bat "${bat_dir}/config"
	dots-file-robust-link themes/current/bat.tmTheme "${bat_dir}/themes/current.tmTheme"
	bat cache --build || echo "bat cache build failed" >&2
}

configure_cursor() {
	dots-file-robust-link themes/current/cursor-icons ~/.local/share/icons/cursor
}

configure_hyprland() {
	dots-file-robust-link config/hypr/hyprland.conf ~/.config/hypr/hyprland.conf
	dots-file-robust-link config/hypr/hyprlock.conf ~/.config/hypr/hyprlock.conf
	dots-file-robust-link config/hypr/hypridle.conf ~/.config/hypr/hypridle.conf
	dots-file-robust-link config/hypr/hyprpaper.conf ~/.config/hypr/hyprpaper.conf
}

configure_monitoring() {
	dots-file-robust-link config/btop.conf ~/.config/btop/btop.conf
	dots-file-robust-link themes/current/btop.theme ~/.config/btop/current.theme
}

configure_qt() {
	dots-file-robust-link config/kvantum.kvconfig ~/.config/Kvantum/kvantum.kvconfig
	dots-file-robust-link themes/current/kvantum ~/.config/Kvantum/current-theme
}

configure_quickshell() {
	dots-file-robust-link config/quickshell ~/.config/quickshell
}

configure_waybar() {
	dots-file-robust-link config/waybar.jsonc ~/.config/waybar/config.jsonc
	dots-file-robust-link themes/current/waybar.css ~/.config/waybar/style.css
}

configure_wofi() {
	dots-file-robust-link config/wofi ~/.config/wofi/config
	dots-file-robust-link themes/current/wofi.css ~/.config/wofi/style.css
}

configure_neovim() {
	dots-file-robust-link config/nvim ~/.config/nvim
	dots-file-robust-link themes/current/nvim.theme ~/.config/nvim/.theme
}

configure_terminal() {
	dots-file-robust-link config/atuin.toml ~/.config/atuin/config.toml
	dots-file-robust-link config/alacritty.toml ~/.config/alacritty/alacritty.toml
	dots-file-robust-link themes/current/alacritty.toml ~/.config/alacritty/current-theme.toml
	dots-file-template config/starship.toml.j2
	dots-file-robust-link config/starship.toml ~/.config/starship.toml
}

configure_xdg() {
	dots-file-robust-link config/user-dirs.dirs ~/.config/user-dirs.dirs
}

configure_mako() {
	dots-file-robust-link themes/current/mako.ini ~/.config/mako/config
}

configure_shell
configure_uwsm
configure_git
configure_bat
configure_cursor
configure_hyprland
configure_monitoring
configure_qt
configure_quickshell
configure_waybar
configure_wofi
configure_neovim
configure_terminal
configure_xdg
configure_mako

dots-refresh-all
